<script>
document.addEventListener('DOMContentLoaded', function() {
  // Mobile menu functionality
  const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
  const mobileMenu = document.getElementById('mobile-menu');
  
  if (mobileMenuToggle && mobileMenu) {
    const hamburger = mobileMenuToggle.querySelector('.hamburger');
    
    function closeMobileMenu() {
      mobileMenu.classList.remove('open');
      hamburger?.classList.remove('open');
      mobileMenuToggle.setAttribute('aria-expanded', 'false');
    }
    
    mobileMenuToggle.addEventListener('click', function() {
      const isOpen = mobileMenu.classList.toggle('open');
      hamburger?.classList.toggle('open');
      mobileMenuToggle.setAttribute('aria-expanded', isOpen);
    });
    
    mobileMenu.querySelectorAll('.nav-link').forEach(link => {
      link.addEventListener('click', closeMobileMenu);
    });
    
    document.addEventListener('click', function(e) {
      if (!mobileMenuToggle.contains(e.target) && !mobileMenu.contains(e.target)) {
        closeMobileMenu();
      }
    });
  }
  
  // Header scroll effect
  const header = document.getElementById('site-header');
  if (header) {
    let ticking = false;
    function updateHeader() {
      header.classList.toggle('scrolled', window.scrollY > 100);
      ticking = false;
    }
    
    window.addEventListener('scroll', function() {
      if (!ticking) {
        requestAnimationFrame(updateHeader);
        ticking = true;
      }
    });
  }
  
  // Intersection Observer for animations
  if ('IntersectionObserver' in window) {
    const observer = new IntersectionObserver(function(entries) {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.style.opacity = '1';
          entry.target.style.transform = 'translateY(0)';
        }
      });
    }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });
    
    document.querySelectorAll('.service-card, .hero-feature, .glass-card').forEach(el => {
      el.style.cssText = 'opacity:0;transform:translateY(20px);transition:opacity 0.6s ease,transform 0.6s ease';
      observer.observe(el);
    });
  }
});
</script>